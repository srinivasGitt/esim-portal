<div class="es-modal add-edit-modal plan" *ngIf="!inProgress; else spinner">
    <!-- <div class="modal-header-flex">
        <div class="modal-header-text-container">
            <span class="plan-heder-icon">
                <svg *ngIf="title === 'Add New Plan'" class="m-auto" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.75 13.5C8.75 13.0858 9.08579 12.75 9.5 12.75H11.25V11C11.25 10.5858 11.5858 10.25 12 10.25C12.4142 10.25 12.75 10.5858 12.75 11V12.75H14.5C14.9142 12.75 15.25 13.0858 15.25 13.5C15.25 13.9142 14.9142 14.25 14.5 14.25H12.75V16C12.75 16.4142 12.4142 16.75 12 16.75C11.5858 16.75 11.25 16.4142 11.25 16V14.25H9.5C9.08579 14.25 8.75 13.9142 8.75 13.5Z" fill="black"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M21.1612 9.74679C21.558 12.233 21.5296 14.7686 21.077 17.2453C20.8747 18.353 19.9483 19.1833 18.8252 19.2636L17.1873 19.3808C13.7334 19.6279 10.2664 19.6279 6.81252 19.3808L5.29851 19.2725C4.10249 19.1869 3.11598 18.3027 2.90046 17.1232C2.46379 14.7333 2.38904 12.2913 2.6787 9.87915L2.95118 7.61004C3.11289 6.26343 4.25529 5.25 5.61158 5.25H7.90314C9.0209 5.25 9.95217 6.04846 10.1577 7.10612H18.4721C19.7785 7.10612 20.8912 8.05533 21.0971 9.34535L21.1612 9.74679ZM19.6015 16.9757C20.0235 14.6662 20.05 12.3017 19.6799 9.98322L19.6158 9.58178C19.5261 9.0197 19.0413 8.60612 18.4721 8.60612H9.75927C9.1742 8.60612 8.69991 8.13183 8.69991 7.54677C8.69991 7.10672 8.34319 6.75 7.90314 6.75H5.61158C5.01455 6.75 4.51167 7.19611 4.44048 7.78888L4.168 10.058C3.89627 12.3208 3.9664 14.6116 4.37603 16.8536C4.46856 17.36 4.89208 17.7396 5.40556 17.7763L6.91956 17.8846C10.3021 18.1266 13.6977 18.1266 17.0803 17.8846L18.7181 17.7674C19.1587 17.7359 19.5221 17.4102 19.6015 16.9757Z" fill="black"/>
                </svg>
                <svg *ngIf="title === 'Edit Plan'" class="m-auto" width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 11.0837V14H3.09572L12.226 5.39897L9.13032 2.48271L0 11.0837ZM14.6201 3.14373C14.942 2.84044 14.942 2.35051 14.6201 2.04722L12.6883 0.227468C12.3664 -0.0758228 11.8463 -0.0758228 11.5243 0.227468L10.0136 1.6506L13.1094 4.56687L14.6201 3.14373Z" fill="#475467"/>
                </svg>
            </span>
            <p class="modal-header-text mb-0 mt-3">{{title}}</p>
            <p class="modal-header-sub-text mb-0 mt-2">
                {{ title === 'Add New Plan' ? 'Add a new plan according to your liking.' : 'See and edit the plan as per your liking, your updated plan will be refreshed within 5 minutes'}}
            </p>
        </div>
        <div class="es-btn-close-container me-4 mb-auto">
            <a class="es-btn-close mt-3" (click)="close()"></a>
        </div>
    </div> -->
    <div class="modal-header-flex">
        <div class="modal-header-text-container">
            <div class="mb-3 subscription-header-icon">
                <svg class="add-plan" *ngIf="title === 'Add New Plan'" class="m-auto" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.75 13.5C8.75 13.0858 9.08579 12.75 9.5 12.75H11.25V11C11.25 10.5858 11.5858 10.25 12 10.25C12.4142 10.25 12.75 10.5858 12.75 11V12.75H14.5C14.9142 12.75 15.25 13.0858 15.25 13.5C15.25 13.9142 14.9142 14.25 14.5 14.25H12.75V16C12.75 16.4142 12.4142 16.75 12 16.75C11.5858 16.75 11.25 16.4142 11.25 16V14.25H9.5C9.08579 14.25 8.75 13.9142 8.75 13.5Z" fill="black"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M21.1612 9.74679C21.558 12.233 21.5296 14.7686 21.077 17.2453C20.8747 18.353 19.9483 19.1833 18.8252 19.2636L17.1873 19.3808C13.7334 19.6279 10.2664 19.6279 6.81252 19.3808L5.29851 19.2725C4.10249 19.1869 3.11598 18.3027 2.90046 17.1232C2.46379 14.7333 2.38904 12.2913 2.6787 9.87915L2.95118 7.61004C3.11289 6.26343 4.25529 5.25 5.61158 5.25H7.90314C9.0209 5.25 9.95217 6.04846 10.1577 7.10612H18.4721C19.7785 7.10612 20.8912 8.05533 21.0971 9.34535L21.1612 9.74679ZM19.6015 16.9757C20.0235 14.6662 20.05 12.3017 19.6799 9.98322L19.6158 9.58178C19.5261 9.0197 19.0413 8.60612 18.4721 8.60612H9.75927C9.1742 8.60612 8.69991 8.13183 8.69991 7.54677C8.69991 7.10672 8.34319 6.75 7.90314 6.75H5.61158C5.01455 6.75 4.51167 7.19611 4.44048 7.78888L4.168 10.058C3.89627 12.3208 3.9664 14.6116 4.37603 16.8536C4.46856 17.36 4.89208 17.7396 5.40556 17.7763L6.91956 17.8846C10.3021 18.1266 13.6977 18.1266 17.0803 17.8846L18.7181 17.7674C19.1587 17.7359 19.5221 17.4102 19.6015 16.9757Z" fill="black"/>
                </svg>
                
                <svg *ngIf="title === 'Edit Plan'" class="m-auto" width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 11.0837V14H3.09572L12.226 5.39897L9.13032 2.48271L0 11.0837ZM14.6201 3.14373C14.942 2.84044 14.942 2.35051 14.6201 2.04722L12.6883 0.227468C12.3664 -0.0758228 11.8463 -0.0758228 11.5243 0.227468L10.0136 1.6506L13.1094 4.56687L14.6201 3.14373Z" fill="#475467"/>
                </svg>
            </div>  
        </div>
        <div class="es-btn-close-container mt-0 mb-auto me-3">
            <a class="es-btn-close" (click)="close()"></a>
        </div>
    </div>
    
    <div>
        <p class="modal-header-text mb-0">{{title}}</p>
        <p class="modal-sub-header-text mb-0 mt-2">
            {{ title === 'Add New Plan' ? 'Add a new plan according to your liking.' : 'See and edit the plan as per your liking, your updated plan will be refreshed within 5 minutes.' }}
        </p>
    </div>
    <div class="es-modal-body plan-dialog-bodyscroll">
        <form class="es-modal-form" [formGroup]="planForm" novalidate (ngSubmit)="submit()" autocomplete="off">
            <div class="divHeight">
                <label for="name" class="form-label es-modal-form-label">Plan Name*</label>
                <input type="text" class="form-control es-input" id="name" aria-describedby="name" formControlName="name" [ngClass]="[f.name.valid ? 'border-purple':'']">
                <div>
                    <span class="help-block ng-invalid text-danger" *ngIf="(f.name.touched && f.name.pristine) || (f.name.errors && submitted)">
                        <span class="small" *ngIf="f.name.errors.required">
                            Plan Name is required!
                        </span>
                    </span>
                </div>
            </div>
            <div class="divHeight d-flex justify-content-between">
                <div class="input-width">
                    <label for="dataSize" class="form-label es-modal-form-label">Data*</label>
                    <div class="d-flex">
                        <select class="form-control es-select" formControlName="dataUnit" [ngClass]="[f.dataSize.value != 0 && f.dataSize.valid ? 'border-purple':'']">
                            <option [value]="data" *ngFor="let data of dataDropdown">{{ data }}</option>
                        </select>
                        <input type="text" class="form-control es-input data-input number-input-right-padding" id="dataSize" aria-describedby="dataSize" formControlName="dataSize" (keypress)="numberOnly($event)" [ngClass]="[f.dataSize.value != 0 && f.dataSize.valid ? 'border-purple':'']">
                    </div>
                    <div class="input-number-btn">
                        <span class="number-decremental" (click)="updateValue('dataSize', 'dec')"> - </span>
                        <span class="number-incremental" (click)="updateValue('dataSize', 'inc')"> + </span>
                    </div>
                    <div class="mt-2">
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.dataSize.touched && f.dataSize.pristine) || (f.dataSize.errors && submitted)">
                            <span class="small" *ngIf="f.dataSize.errors.required">
                                Data is required!
                            </span>
                        </span>
                    </div>    
                </div>
                <div class="input-width">
                    <label for="voice" class="form-label es-modal-form-label">Call Minutes*</label>
                    <div class="d-flex">
                        <label for="unlimited" class="my-auto ms-1 me-3 form-label es-modal-form-label unlimited">
                            Unlimited
                            <input type="checkbox" class="form-checbox my-auto" id="unlimited" aria-describedby="unlimited" formControlName="unlimited" #unlimitedCheck checked="false">
                            <span class="checkmark"></span>
                        </label>
                        <input type="text" class="form-control es-input number-input-right-padding" id="voice" aria-describedby="voice" formControlName="voice" [class.disabled]="f.unlimited.value" [value]="f.unlimited.value ? 0 : f.voice.value"  (keypress)="numberOnly($event)" [ngClass]="[f.voice.value != 0 && f.voice.valid ? 'border-purple':'']">
                    </div>
                    <div class="input-number-btn">
                        <span class="number-decremental" [class.disabled]="f.unlimited.value" (click)="updateValue('voice', 'dec')"> - </span>
                        <span class="number-incremental" [class.disabled]="f.unlimited.value" (click)="updateValue('voice', 'inc')"> + </span>
                    </div>
                    <div class="mt-2">
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.voice.errors && submitted)">
                            <span class="small" *ngIf="f.voice.errors.required">
                                Call minutes is required!
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="divHeight d-flex justify-content-between">
                <div class="input-width">
                    <label for="smsPerDay" class="form-label es-modal-form-label">SMS*</label>
                    <input type="text" class="form-control es-input number-input-right-padding" id="smsPerDay" aria-describedby="smsPerDay" formControlName="smsPerDay" (keypress)="numberOnly($event)" [ngClass]="[f.smsPerDay.value != 0 && f.smsPerDay.valid ? 'border-purple':'']">
                    <div class="input-number-btn">
                        <span class="number-decremental" (click)="updateValue('smsPerDay', 'dec')"> - </span>
                        <span class="number-incremental" (click)="updateValue('smsPerDay', 'inc')"> + </span>
                    </div>
                    <div class="mt-2">
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.smsPerDay.touched && f.smsPerDay.pristine) || (f.smsPerDay.errors && submitted)">
                            <span class="small" *ngIf="f.smsPerDay.errors.required">
                                SMS is required!
                            </span>
                        </span>
                    </div>
                </div>
                <div class="input-width">
                    <label for="voice" class="form-label es-modal-form-label">Validity*</label>
                    <div class="d-flex">
                        <select class="form-control es-select validity-select" formControlName="validityUnit" [ngClass]="[f.validity.value != 0 && f.validity.valid ? 'border-purple':'']">
                            <option [value]="validity" *ngFor="let validity of validityDropdown">{{ validity | titlecase }}</option>
                        </select>
                        <input type="text" class="form-control es-input data-input number-input-right-padding" id="validity" aria-describedby="validity" formControlName="validity"  (keypress)="numberOnly($event)" [ngClass]="[f.validity.value != 0 && f.validity.valid ? 'border-purple':'']">
                    </div>
                    <div class="input-number-btn">
                        <span class="number-decremental" (click)="updateValue('validity', 'dec')"> - </span>
                        <span class="number-incremental" (click)="updateValue('validity', 'inc')"> + </span>
                    </div>
                    <div class="mt-2">
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.validity.touched && f.validity.pristine) || (f.validity.errors && submitted)">
                            <span class="small" *ngIf="f.validity.errors.required">
                                Validity is required!
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="divHeight d-flex justify-content-between">
                <div class="input-width">
                    <label for="priceBundle" class="form-label es-modal-form-label">Price*</label>
                    <div class="d-flex relative">
                        <input type="text" class="form-control es-input price-input number-input-right-padding" id="priceBundle" aria-describedby="priceBundle" formControlName="priceBundle" (keypress)="numberOnly($event)" [ngClass]="[f.priceBundle.value != 0 && f.priceBundle.valid ? 'border-purple':'']">
                        <span class="form-label es-modal-form-label price-input-icon"> $ </span>
                    </div>
                    <div class="input-number-btn">
                        <span class="number-decremental" (click)="updateValue('priceBundle', 'dec')"> - </span>
                        <span class="number-incremental" (click)="updateValue('priceBundle', 'inc')"> + </span>
                    </div>
                    <div class="mt-2">
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.priceBundle.touched && f.priceBundle.pristine) || (f.priceBundle.errors && submitted)">
                            <span class="small" *ngIf="f.priceBundle.errors.required">
                                Price is required!
                            </span>
                        </span>
                    </div>
                </div>
                <div class="input-width imsi-input">
                    <label for="imsiType" class="form-label es-modal-form-label">IMSI Type*</label>
                    <div class="d-flex relative container-ng-select">
                        <ng-select
                            [items]="imsiTypeList"
                            [multiple]="false"
                            bindLabel="label"
                            bindValue="_id"
                            placeholder="Select IMSI Type"
                            formControlName="imsiType"
                            class="full-width">
                        </ng-select>
                        <svg class="default" width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 1L5 5L1 1" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.imsiType.touched && f.imsiType.pristine) || (f.imsiType.errors && submitted)">
                            <span class="small" *ngIf="f.imsiType.errors.required">
                                IMSI Type is required!
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="divHeight d-flex justify-content-between">
                <div class="col-12 location-input">
                    <label for="supportedCountries" class="form-label es-modal-form-label">Location*</label>
                    <div class="relative">
                        <ng-select 
                            [items]="countriesAlias"
                            formControlName="supportedCountries"
                            bindLabel="name"
                            bindValue="name"
                            [multiple]="true"
                            placeholder="Search for countries / Multiple countries can be selected"
                            (change)="onCountryChange($event)">

                            <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                <div class="ng-value" *ngFor="let item of items | slice:0:2">
                                    <span class="ng-value-label"><img [src]="$any(item).flag" width="20px" height="20px"> {{$any(item).name}}</span>
                                    <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                </div>
                                <div class="ng-value" *ngIf="items.length > 2">
                                    <span class="ng-value-label" [tooltip]="displayContryList(items)" placement="top" delay="100" offset="15">{{items.length - 2}} more...</span>
                                </div>
                            </ng-template>

                            <ng-template ng-option-tmp let-item="item">
                                <img [src]="item.flag" width="20px" height="20px"> {{item.name}}
                            </ng-template>
                        </ng-select>

                        <span class="ng-search">
                            <svg class="img-fluid" fill="#707070" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30px" height="30px">
                                <path d="M 13 3 C 7.4889971 3 3 7.4889971 3 13 C 3 18.511003 7.4889971 23 13 23 C 15.396508 23 17.597385 22.148986 19.322266 20.736328 L 25.292969 26.707031 A 1.0001 1.0001 0 1 0 26.707031 25.292969 L 20.736328 19.322266 C 22.148986 17.597385 23 15.396508 23 13 C 23 7.4889971 18.511003 3 13 3 z M 13 5 C 17.430123 5 21 8.5698774 21 13 C 21 17.430123 17.430123 21 13 21 C 8.5698774 21 5 17.430123 5 13 C 5 8.5698774 8.5698774 5 13 5 z" />
                            </svg>
                        </span>
                    </div>
                    <div>
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.supportedCountries.touched && f.supportedCountries.pristine) || (f.supportedCountries.errors && submitted)">
                            <span class="small" *ngIf="f.supportedCountries.errors.required">
                                Location is required!
                            </span>
                        </span>
                    </div>    
                </div>
            </div>

            <div class="divHeight d-flex justify-content-between">
                <div class="input-width">
                    <label for="dateEarliestActivation" class="form-label es-modal-form-label">Earliest Activation*</label>
                    <div class="d-flex input-icon">
                        <input type="date" class="form-control es-input" id="dateEarliestActivation" aria-describedby="dateEarliestActivation" formControlName="dateEarliestActivation" [min]="currentDate" [ngClass]="[f.dateEarliestActivation.valid ? 'border-purple':'']">
                        <span class="form-label es-modal-form-label date-input-icon">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_2349_16799)">
                                <path d="M8.2 9.59999C7.97333 9.59999 7.78347 9.52318 7.6304 9.36959C7.4768 9.21652 7.4 9.02665 7.4 8.79998C7.4 8.57332 7.4768 8.38318 7.6304 8.22958C7.78347 8.07652 7.97333 7.99998 8.2 7.99998C8.42667 7.99998 8.6168 8.07652 8.7704 8.22958C8.92347 8.38318 9 8.57332 9 8.79998C9 9.02665 8.92347 9.21652 8.7704 9.36959C8.6168 9.52318 8.42667 9.59999 8.2 9.59999ZM5 9.59999C4.77333 9.59999 4.5832 9.52318 4.4296 9.36959C4.27653 9.21652 4.2 9.02665 4.2 8.79998C4.2 8.57332 4.27653 8.38318 4.4296 8.22958C4.5832 8.07652 4.77333 7.99998 5 7.99998C5.22667 7.99998 5.4168 8.07652 5.5704 8.22958C5.72347 8.38318 5.8 8.57332 5.8 8.79998C5.8 9.02665 5.72347 9.21652 5.5704 9.36959C5.4168 9.52318 5.22667 9.59999 5 9.59999ZM11.4 9.59999C11.1733 9.59999 10.9835 9.52318 10.8304 9.36959C10.6768 9.21652 10.6 9.02665 10.6 8.79998C10.6 8.57332 10.6768 8.38318 10.8304 8.22958C10.9835 8.07652 11.1733 7.99998 11.4 7.99998C11.6267 7.99998 11.8165 8.07652 11.9696 8.22958C12.1232 8.38318 12.2 8.57332 12.2 8.79998C12.2 9.02665 12.1232 9.21652 11.9696 9.36959C11.8165 9.52318 11.6267 9.59999 11.4 9.59999ZM8.2 12.8C7.97333 12.8 7.78347 12.7232 7.6304 12.5696C7.4768 12.4165 7.4 12.2267 7.4 12C7.4 11.7733 7.4768 11.5835 7.6304 11.4304C7.78347 11.2768 7.97333 11.2 8.2 11.2C8.42667 11.2 8.6168 11.2768 8.7704 11.4304C8.92347 11.5835 9 11.7733 9 12C9 12.2267 8.92347 12.4165 8.7704 12.5696C8.6168 12.7232 8.42667 12.8 8.2 12.8ZM5 12.8C4.77333 12.8 4.5832 12.7232 4.4296 12.5696C4.27653 12.4165 4.2 12.2267 4.2 12C4.2 11.7733 4.27653 11.5835 4.4296 11.4304C4.5832 11.2768 4.77333 11.2 5 11.2C5.22667 11.2 5.4168 11.2768 5.5704 11.4304C5.72347 11.5835 5.8 11.7733 5.8 12C5.8 12.2267 5.72347 12.4165 5.5704 12.5696C5.4168 12.7232 5.22667 12.8 5 12.8ZM11.4 12.8C11.1733 12.8 10.9835 12.7232 10.8304 12.5696C10.6768 12.4165 10.6 12.2267 10.6 12C10.6 11.7733 10.6768 11.5835 10.8304 11.4304C10.9835 11.2768 11.1733 11.2 11.4 11.2C11.6267 11.2 11.8165 11.2768 11.9696 11.4304C12.1232 11.5835 12.2 11.7733 12.2 12C12.2 12.2267 12.1232 12.4165 11.9696 12.5696C11.8165 12.7232 11.6267 12.8 11.4 12.8ZM2.6 16C2.16 16 1.7832 15.8435 1.4696 15.5304C1.15653 15.2168 1 14.84 1 14.4V3.19998C1 2.75998 1.15653 2.38345 1.4696 2.07038C1.7832 1.75678 2.16 1.59998 2.6 1.59998H3.4V-1.52588e-05H5V1.59998H11.4V-1.52588e-05H13V1.59998H13.8C14.24 1.59998 14.6168 1.75678 14.9304 2.07038C15.2435 2.38345 15.4 2.75998 15.4 3.19998V14.4C15.4 14.84 15.2435 15.2168 14.9304 15.5304C14.6168 15.8435 14.24 16 13.8 16H2.6ZM2.6 14.4H13.8V6.39998H2.6V14.4Z" fill="#AAAAAA"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_2349_16799">
                                <rect width="16" height="16" fill="white"/>
                                </clipPath>
                                </defs>
                            </svg>
                        </span>
                    </div>
                    <div>
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.dateEarliestActivation.touched && f.dateEarliestActivation.pristine) || (f.dateEarliestActivation.errors && submitted)">
                            <span class="small" *ngIf="f.dateEarliestActivation.errors.required">
                                Earliest Activation is required!
                            </span>
                        </span>
                    </div>
                </div>
                
                <div class="input-width">
                    <label for="dateEarliestAvailable" class="form-label es-modal-form-label">Earliest Available*</label>
                    <div class="d-flex input-icon">
                        <input type="date" class="form-control es-input" id="dateEarliestAvailable" aria-describedby="dateEarliestAvailable" formControlName="dateEarliestAvailable" [min]="f.dateEarliestActivation.value" [ngClass]="[f.dateEarliestAvailable.valid ? 'border-purple':'']">
                        <span class="form-label es-modal-form-label date-input-icon">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_2349_16799)">
                                <path d="M8.2 9.59999C7.97333 9.59999 7.78347 9.52318 7.6304 9.36959C7.4768 9.21652 7.4 9.02665 7.4 8.79998C7.4 8.57332 7.4768 8.38318 7.6304 8.22958C7.78347 8.07652 7.97333 7.99998 8.2 7.99998C8.42667 7.99998 8.6168 8.07652 8.7704 8.22958C8.92347 8.38318 9 8.57332 9 8.79998C9 9.02665 8.92347 9.21652 8.7704 9.36959C8.6168 9.52318 8.42667 9.59999 8.2 9.59999ZM5 9.59999C4.77333 9.59999 4.5832 9.52318 4.4296 9.36959C4.27653 9.21652 4.2 9.02665 4.2 8.79998C4.2 8.57332 4.27653 8.38318 4.4296 8.22958C4.5832 8.07652 4.77333 7.99998 5 7.99998C5.22667 7.99998 5.4168 8.07652 5.5704 8.22958C5.72347 8.38318 5.8 8.57332 5.8 8.79998C5.8 9.02665 5.72347 9.21652 5.5704 9.36959C5.4168 9.52318 5.22667 9.59999 5 9.59999ZM11.4 9.59999C11.1733 9.59999 10.9835 9.52318 10.8304 9.36959C10.6768 9.21652 10.6 9.02665 10.6 8.79998C10.6 8.57332 10.6768 8.38318 10.8304 8.22958C10.9835 8.07652 11.1733 7.99998 11.4 7.99998C11.6267 7.99998 11.8165 8.07652 11.9696 8.22958C12.1232 8.38318 12.2 8.57332 12.2 8.79998C12.2 9.02665 12.1232 9.21652 11.9696 9.36959C11.8165 9.52318 11.6267 9.59999 11.4 9.59999ZM8.2 12.8C7.97333 12.8 7.78347 12.7232 7.6304 12.5696C7.4768 12.4165 7.4 12.2267 7.4 12C7.4 11.7733 7.4768 11.5835 7.6304 11.4304C7.78347 11.2768 7.97333 11.2 8.2 11.2C8.42667 11.2 8.6168 11.2768 8.7704 11.4304C8.92347 11.5835 9 11.7733 9 12C9 12.2267 8.92347 12.4165 8.7704 12.5696C8.6168 12.7232 8.42667 12.8 8.2 12.8ZM5 12.8C4.77333 12.8 4.5832 12.7232 4.4296 12.5696C4.27653 12.4165 4.2 12.2267 4.2 12C4.2 11.7733 4.27653 11.5835 4.4296 11.4304C4.5832 11.2768 4.77333 11.2 5 11.2C5.22667 11.2 5.4168 11.2768 5.5704 11.4304C5.72347 11.5835 5.8 11.7733 5.8 12C5.8 12.2267 5.72347 12.4165 5.5704 12.5696C5.4168 12.7232 5.22667 12.8 5 12.8ZM11.4 12.8C11.1733 12.8 10.9835 12.7232 10.8304 12.5696C10.6768 12.4165 10.6 12.2267 10.6 12C10.6 11.7733 10.6768 11.5835 10.8304 11.4304C10.9835 11.2768 11.1733 11.2 11.4 11.2C11.6267 11.2 11.8165 11.2768 11.9696 11.4304C12.1232 11.5835 12.2 11.7733 12.2 12C12.2 12.2267 12.1232 12.4165 11.9696 12.5696C11.8165 12.7232 11.6267 12.8 11.4 12.8ZM2.6 16C2.16 16 1.7832 15.8435 1.4696 15.5304C1.15653 15.2168 1 14.84 1 14.4V3.19998C1 2.75998 1.15653 2.38345 1.4696 2.07038C1.7832 1.75678 2.16 1.59998 2.6 1.59998H3.4V-1.52588e-05H5V1.59998H11.4V-1.52588e-05H13V1.59998H13.8C14.24 1.59998 14.6168 1.75678 14.9304 2.07038C15.2435 2.38345 15.4 2.75998 15.4 3.19998V14.4C15.4 14.84 15.2435 15.2168 14.9304 15.5304C14.6168 15.8435 14.24 16 13.8 16H2.6ZM2.6 14.4H13.8V6.39998H2.6V14.4Z" fill="#AAAAAA"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_2349_16799">
                                <rect width="16" height="16" fill="white"/>
                                </clipPath>
                                </defs>
                            </svg>
                        </span>
                    </div>
                    <div>
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.dateEarliestAvailable.touched && f.dateEarliestAvailable.pristine) || (f.dateEarliestAvailable.errors && submitted)">
                            <span class="small" *ngIf="f.dateEarliestAvailable.errors.required">
                                Earliest Available is required!
                            </span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="divHeight d-flex justify-content-between">
                <div class="input-width">
                    <label for="dateLatestAvailable" class="form-label es-modal-form-label">Latest Available*</label>
                    <div class="d-flex input-icon">
                        <input type="date" class="form-control es-input" id="dateLatestAvailable" aria-describedby="dateLatestAvailable" formControlName="dateLatestAvailable" [min]="f.dateEarliestAvailable.value" placeholder="Latest Available Date" [ngClass]="[f.dateLatestAvailable.valid ? 'border-purple':'']">
                        <span class="form-label es-modal-form-label date-input-icon">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_2349_16799)">
                                <path d="M8.2 9.59999C7.97333 9.59999 7.78347 9.52318 7.6304 9.36959C7.4768 9.21652 7.4 9.02665 7.4 8.79998C7.4 8.57332 7.4768 8.38318 7.6304 8.22958C7.78347 8.07652 7.97333 7.99998 8.2 7.99998C8.42667 7.99998 8.6168 8.07652 8.7704 8.22958C8.92347 8.38318 9 8.57332 9 8.79998C9 9.02665 8.92347 9.21652 8.7704 9.36959C8.6168 9.52318 8.42667 9.59999 8.2 9.59999ZM5 9.59999C4.77333 9.59999 4.5832 9.52318 4.4296 9.36959C4.27653 9.21652 4.2 9.02665 4.2 8.79998C4.2 8.57332 4.27653 8.38318 4.4296 8.22958C4.5832 8.07652 4.77333 7.99998 5 7.99998C5.22667 7.99998 5.4168 8.07652 5.5704 8.22958C5.72347 8.38318 5.8 8.57332 5.8 8.79998C5.8 9.02665 5.72347 9.21652 5.5704 9.36959C5.4168 9.52318 5.22667 9.59999 5 9.59999ZM11.4 9.59999C11.1733 9.59999 10.9835 9.52318 10.8304 9.36959C10.6768 9.21652 10.6 9.02665 10.6 8.79998C10.6 8.57332 10.6768 8.38318 10.8304 8.22958C10.9835 8.07652 11.1733 7.99998 11.4 7.99998C11.6267 7.99998 11.8165 8.07652 11.9696 8.22958C12.1232 8.38318 12.2 8.57332 12.2 8.79998C12.2 9.02665 12.1232 9.21652 11.9696 9.36959C11.8165 9.52318 11.6267 9.59999 11.4 9.59999ZM8.2 12.8C7.97333 12.8 7.78347 12.7232 7.6304 12.5696C7.4768 12.4165 7.4 12.2267 7.4 12C7.4 11.7733 7.4768 11.5835 7.6304 11.4304C7.78347 11.2768 7.97333 11.2 8.2 11.2C8.42667 11.2 8.6168 11.2768 8.7704 11.4304C8.92347 11.5835 9 11.7733 9 12C9 12.2267 8.92347 12.4165 8.7704 12.5696C8.6168 12.7232 8.42667 12.8 8.2 12.8ZM5 12.8C4.77333 12.8 4.5832 12.7232 4.4296 12.5696C4.27653 12.4165 4.2 12.2267 4.2 12C4.2 11.7733 4.27653 11.5835 4.4296 11.4304C4.5832 11.2768 4.77333 11.2 5 11.2C5.22667 11.2 5.4168 11.2768 5.5704 11.4304C5.72347 11.5835 5.8 11.7733 5.8 12C5.8 12.2267 5.72347 12.4165 5.5704 12.5696C5.4168 12.7232 5.22667 12.8 5 12.8ZM11.4 12.8C11.1733 12.8 10.9835 12.7232 10.8304 12.5696C10.6768 12.4165 10.6 12.2267 10.6 12C10.6 11.7733 10.6768 11.5835 10.8304 11.4304C10.9835 11.2768 11.1733 11.2 11.4 11.2C11.6267 11.2 11.8165 11.2768 11.9696 11.4304C12.1232 11.5835 12.2 11.7733 12.2 12C12.2 12.2267 12.1232 12.4165 11.9696 12.5696C11.8165 12.7232 11.6267 12.8 11.4 12.8ZM2.6 16C2.16 16 1.7832 15.8435 1.4696 15.5304C1.15653 15.2168 1 14.84 1 14.4V3.19998C1 2.75998 1.15653 2.38345 1.4696 2.07038C1.7832 1.75678 2.16 1.59998 2.6 1.59998H3.4V-1.52588e-05H5V1.59998H11.4V-1.52588e-05H13V1.59998H13.8C14.24 1.59998 14.6168 1.75678 14.9304 2.07038C15.2435 2.38345 15.4 2.75998 15.4 3.19998V14.4C15.4 14.84 15.2435 15.2168 14.9304 15.5304C14.6168 15.8435 14.24 16 13.8 16H2.6ZM2.6 14.4H13.8V6.39998H2.6V14.4Z" fill="#AAAAAA"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_2349_16799">
                                <rect width="16" height="16" fill="white"/>
                                </clipPath>
                                </defs>
                            </svg>
                        </span>
                    </div>
                    <div>
                        <span class="help-block ng-invalid text-danger" *ngIf="(f.dateLatestAvailable.touched && f.dateLatestAvailable.pristine) || (f.dateLatestAvailable.errors && submitted)">
                            <span class="small" *ngIf="f.dateLatestAvailable.errors.required">
                                Latest Available is required!
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <!-- <button type="submit" class="btn btn-primary w-100">Submit</button> -->
            <div class="row gx-2 d-flex justify-content-between">
                <!-- <div class="col-md-6 gx-5"> -->
                    <button class="btn btn-secondary btn-width" (click)="close()">Cancel</button>
                <!-- </div> -->
                <!-- <div class="col-md-6"> -->
                    <button type="submit" class="btn btn-primary ms-auto btn-width">{{ title === 'Add New Plan' ? 'Submit' : 'Save Changes' }}
                    </button>
                <!-- </div> -->
            </div>
        </form>
    </div>
    <div class="es-modal-footer"></div>
</div>

<!-- Loading Spinner - Start -->
<ng-template #spinner class="loader-align">
    <app-loading-spinner></app-loading-spinner>
</ng-template>
<!-- Loading Spinner - End -->