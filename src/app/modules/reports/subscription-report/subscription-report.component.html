<div class="common-header user-dashboard  main-content-div-area" style="margin-top: 115px;">
  <div class="heading-flex">
      <div class="heading-text">
          <h2>Subscription Reports</h2>
      </div>
  </div>

  <div class="row">
      <div class="col-3">

          <div class="dashboard-head-flex">
              <div class="filter-head d-flex py-1 px-4 w-75">
                  <div class="dropdown d-flex w-100">
                      <a class="lang-dropdown sg-font-small-regular d-flex w-100 align-items-center" role="button"
                          id="dropdownMenuLink-lang" data-bs-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="false">
                          <span id="languageTootltip" style="font-weight: 600;">{{selectedDay}}
                          </span>
                          <!-- <i class="fa fa-angle-down ms-auto" style="top: 4px;right: -18px;"></i> -->
                          <!-- <img class="fa-angle-down ms-auto" style="height: 9px;" src="assets/images/dashboard/icon/down-arrow.svg" alt=""> -->
                          <span class="ms-auto">
                              <svg class="down-arrow" width="13" height="7" viewBox="0 0 13 7" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M0.211534 0.223544C0.493579 -0.0745154 0.950865 -0.0745154 1.23291 0.223544L5.98931 5.25C6.27136 5.54806 6.72864 5.54806 7.01069 5.25L11.7671 0.223545C12.0491 -0.0745139 12.5064 -0.0745139 12.7885 0.223546C13.0705 0.521604 13.0705 1.00485 12.7885 1.30291L8.03206 6.32937C7.18593 7.22354 5.81407 7.22355 4.96794 6.32937L0.211533 1.30291C-0.0705119 1.00485 -0.0705118 0.521603 0.211534 0.223544Z"
                                      fill="#1C1C1C" />
                              </svg>
                          </span>
                      </a>

                      <div class="dropdown-menu lang-dropdown-option border-secondary"
                          aria-labelledby="dropdownMenuLink-lang">
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'All'}"
                                (click)="selectTimeframe('all'); selectedDay = 'All'; isCustomRange= false">All</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Last 365 Days'}"
                                (click)="selectTimeframe('last_365_days'); selectedDay = 'Last 365 Days'; isCustomRange= false">Last 365 Days</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Last Month'}"
                                (click)="selectTimeframe('previous_month'); selectedDay = 'Last Month'; isCustomRange= false">Last Month</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Last Week'}"
                                (click)="selectTimeframe('previous_week'); selectedDay = 'Last Week'; isCustomRange= false">Last Week</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Current Week'}"
                                (click)="selectTimeframe('week'); selectedDay = 'Current Week'; isCustomRange= false">Current
                                Week</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Current Month'}"
                                (click)="selectTimeframe('month'); selectedDay = 'Current Month'; isCustomRange= false">Current
                                Month</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Current Year'}"
                                (click)="selectTimeframe('year'); selectedDay = 'Current Year'; isCustomRange= false">Current
                                Year</a>
                            <a class="dropdown-item lang-dropdown-item sg-font-regular"
                                [ngClass]="{'hover-bg': selectedDay == 'Custom Range'}"
                                (click)="selectedDay = 'Custom Range'; isCustomRange= true;">Custom Range</a>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <ng-container *ngIf="isCustomRange">
          <div class="col-9">
              <div class="col-4">

                  <div class="dashboard-head-flex">
                      <div class="filter-head w-75">
                          <mat-form-field appearance="outline">
                              <mat-date-range-input [formGroup]="customForm" [rangePicker]="picker"
                                  [max]="currentDate">
                                  <input matStartDate formControlName="fromDate" placeholder="DD-MM-YYYY"
                                      #dateRangeStart>
                                  <input matEndDate formControlName="toDate" placeholder="DD-MM-YYYY" #dateRangeEnd
                                      (dateChange)="dateRangeChange(dateRangeStart, dateRangeEnd)">
                              </mat-date-range-input>
                              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                              <mat-date-range-picker #picker></mat-date-range-picker>
                          </mat-form-field>
                      </div>
                  </div>
              </div>
          </div>
      </ng-container>
    </div>

  <div class="row">
      <div class="col-8 pt-4 pe-0">
          <div class="dashboard-graph" *ngIf="!inProgress; else spinner">
              <div class="dashboard-heading d-flex align-items-center mb-2">
                  <h6 class="revenue-text">
                    No. of Subscriptions
                  </h6>
              </div>
              <canvas id="revenueChart" height="100px"></canvas>
          </div>
          <!-- Loading Spinner - Start -->
          <ng-template #spinner class="loader-align">
              <app-loading-spinner></app-loading-spinner>
          </ng-template>
          <!-- Loading Spinner - End -->
      </div>

      <div class="col-3 pt-4 ps-3">
          <div class="dashboard-graph report-utility" *ngIf="!inProgress; else spinner">
              <div class="align-items-center mb-2 border-bottom">
                  <p class="report-utility-text">
                    You can download in details report for Subscription selected date range
                  </p>

                  <div class="dashboard-head-flex">
                      <div>
                          <button type="button" class="btn btn-dashboard-head d-flex align-items-center" (click)="downloadReport()" [disabled]="disableDownloadButton">
                              <span class="me-4">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="21" height="22" viewBox="0 0 21 22"
                                      fill="none">
                                      <circle cx="10.5" cy="11" r="10.5" fill="white" />
                                      <mask id="mask0_6253_15674" style="mask-type:alpha" maskUnits="userSpaceOnUse"
                                          x="2" y="2" width="17" height="17">
                                          <rect x="2" y="2" width="17" height="17" fill="#D9D9D9" />
                                      </mask>
                                      <g mask="url(#mask0_6253_15674)">
                                          <mask id="mask1_6253_15674" style="mask-type:alpha"
                                              maskUnits="userSpaceOnUse" x="2" y="2" width="17" height="17">
                                              <rect x="2" y="2" width="17" height="17" fill="#D9D9D9" />
                                          </mask>
                                          <g mask="url(#mask1_6253_15674)">
                                              <path
                                                  d="M6.25065 16.1665C5.86107 16.1665 5.52756 16.0278 5.25013 15.7503C4.9727 15.4729 4.83398 15.1394 4.83398 14.7498V12.6248H6.25065V14.7498H14.7507V12.6248H16.1673V14.7498C16.1673 15.1394 16.0286 15.4729 15.7512 15.7503C15.4737 16.0278 15.1402 16.1665 14.7507 16.1665H6.25065ZM10.5007 13.3332L6.95898 9.79149L7.95065 8.76441L9.79232 10.6061V4.83316H11.209V10.6061L13.0507 8.76441L14.0423 9.79149L10.5007 13.3332Z"
                                                  fill="#6365EF" />
                                          </g>
                                      </g>
                                  </svg>
                              </span>
                              <span>Download Report</span>
                          </button>
                      </div>
                  </div>
              </div>

              <div class="align-items-center mb-2">
                  <p class="report-utility-text">
                    You can email in detail report to your register email ID
                  </p>

                  <div class="dashboard-head-flex">
                      <div>
                          <button type="button" class="btn btn-dashboard-head d-flex align-items-center" (click)="sendSubscriptionReportEmail()" [disabled]="disableEmailButton">
                              <span class="me-4">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" viewBox="0 0 18 14" fill="none">
                                      <path d="M15.75 0H1.75C0.7875 0 0.00874999 0.7875 0.00874999 1.75L0 12.25C0 13.2125 0.7875 14 1.75 14H15.75C16.7125 14 17.5 13.2125 17.5 12.25V1.75C17.5 0.7875 16.7125 0 15.75 0ZM15.75 3.5L8.75 7.875L1.75 3.5V1.75L8.75 6.125L15.75 1.75V3.5Z" fill="white"/>
                                  </svg>
                              </span>
                              <span>Email Report</span>
                          </button>
                      </div>
                  </div>
              </div>
              <!-- <canvas id="revenueChart"></canvas> -->
          </div>
          <!-- Loading Spinner - Start -->
          <!-- <ng-template #spinner class="loader-align">
              <app-loading-spinner></app-loading-spinner>
          </ng-template> -->
          <!-- Loading Spinner - End -->
      </div>
  </div>
</div>
